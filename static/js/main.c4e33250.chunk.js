(this["webpackJsonpweather-cloud"]=this["webpackJsonpweather-cloud"]||[]).push([[0],{14:function(e,t,c){},32:function(e,t,c){},33:function(e,t,c){},60:function(e,t,c){},61:function(e,t,c){},62:function(e,t,c){},63:function(e,t,c){},64:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c(9),i=c.n(a),o=(c(32),c(33),c(2)),r=(c(14),c(24)),s=c(6),l=c.n(s),u=c(13),d=c(4),p=c(25).create({baseURL:"https://api.openweathermap.org/data/2.5/"}),j=function(e,t){return p.get("weather?lat=".concat(e,"&lon=").concat(t,"&units=metric&lang=en&appid=fec27e67f0ec6ce5544546b6c430c8c9"))},f=function(e){return p.get("weather?q=".concat(e,"&units=metric&lang=en&appid=fec27e67f0ec6ce5544546b6c430c8c9"))},b=function(e){return p.get("forecast?q=".concat(e,"&lang=en&units=metric&appid=fec27e67f0ec6ce5544546b6c430c8c9")).then((function(e){return e.data.list}))},h=c(26),O=Object(d.c)({name:"cities",initialState:{localLocation:[],locations:[]},reducers:{addCity:function(e,t){e.locations=[].concat(Object(h.a)(e.locations),[t.payload]),localStorage.setItem("locations",JSON.stringify(e.locations))},deleteCity:function(e,t){e.locations=e.locations.filter((function(e){return e.name!==t.payload})),localStorage.setItem("locations",JSON.stringify(e.locations))},setLocalCity:function(e,t){e.localLocation.push(t.payload)}}}),m=O.actions,g=m.addCity,x=m.setLocalCity,y=m.deleteCity,v=O.reducer,w=Object(d.c)({name:"main",initialState:{isFetching:!1},reducers:{toggleFetching:function(e,t){e.isFetching=t.payload}}}),N=w.actions.toggleFetching,C=w.reducer,P=Object(d.b)("modals/getData",function(){var e=Object(u.a)(l.a.mark((function e(t,c){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=c.dispatch)(N(!0)),e.prev=2,e.next=5,b(t);case 5:return a=e.sent,n(F(!0)),e.abrupt("return",{city:t,res:a});case 10:e.prev=10,e.t0=e.catch(2),alert("Some error occured");case 13:return e.prev=13,n(N(!1)),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[2,10,13,16]])})));return function(t,c){return e.apply(this,arguments)}}()),I=Object(d.b)("modals/addCity",function(){var e=Object(u.a)(l.a.mark((function e(t,c){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=c.dispatch)(N(!0)),e.prev=2,e.next=5,f(t);case 5:a=e.sent,n(g(a.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),alert("".concat(t," city was not found"));case 12:return e.prev=12,n(N(!1)),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[2,9,12,15]])})));return function(t,c){return e.apply(this,arguments)}}()),k=Object(d.c)({name:"modals",initialState:{addCityPopupOpen:!1,detailInfoPopup:{isOpen:!1,cityInfo:{}}},reducers:{toggleAddCityPopupOpen:function(e,t){e.addCityPopupOpen=t.payload},toggleDetailInfoPopupOpen:function(e,t){e.detailInfoPopup.isOpen=t.payload},setDetailInfoPopup:function(e,t){e.detailInfoPopup.cityInfo=t.payload}},extraReducers:Object(r.a)({},P.fulfilled,(function(e,t){e.detailInfoPopup.cityInfo=t.payload}))}),S=k.actions,D=S.toggleAddCityPopupOpen,F=S.toggleDetailInfoPopupOpen,L=(S.setDetailInfoPopup,k.reducer),A=c(1),E=function(e){var t=e.icon,c=e.degrees,n=e.weather,a=e.city,i=Object(o.b)();return Object(A.jsxs)("div",{className:"card",onClick:function(){i(P(a))},children:[Object(A.jsx)("img",{src:t,alt:"icon"}),Object(A.jsx)("h2",{className:"card-degree",children:c}),Object(A.jsx)("p",{className:"card-weather",children:n}),Object(A.jsx)("h3",{className:"card-city",children:a})]})},J=function(){var e=Object(o.c)((function(e){return e.modals.addCityPopupOpen})),t=Object(o.b)();return Object(A.jsxs)("div",{className:"card",children:[Object(A.jsx)("h2",{children:"Add City"}),Object(A.jsx)("button",{className:"btn-add",onClick:function(){t(D(!e))},children:"+"})]})},M=c(27),q=(c(60),c(61),function(){var e=Object(n.useState)(""),t=Object(M.a)(e,2),c=t[0],a=t[1],i=Object(o.c)((function(e){return e.modals.addCityPopupOpen})),r=Object(o.b)(),s=function(){r(D(!i))};return document.body.style.overflow=i?"hidden":"auto",Object(A.jsx)("div",{className:i?"popup active":"popup",onClick:s,children:Object(A.jsxs)("div",{className:"popup-inner",onClick:function(e){return e.stopPropagation()},children:[Object(A.jsx)("span",{className:"popup-close",onClick:s,children:"x"}),Object(A.jsx)("h2",{className:"popup-title",children:"Add City"}),Object(A.jsx)("input",{value:c,onChange:function(e){return a(e.target.value)},className:"popup-input",placeholder:"Enter city name [ex. London]",type:"text",id:"city"}),Object(A.jsx)("button",{className:"popup-btn",onClick:function(){r(I(c))},children:"Add City"})]})})}),R=(c(62),function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.modals.detailInfoPopup.cityInfo})),c=Object(o.c)((function(e){return e.modals.detailInfoPopup.isOpen})),n=t.res&&t.res.map((function(e,t){var c=new Date(e.dt_txt),n="".concat(c.getDate(),".").concat(c.getMonth()+1,".").concat(c.getFullYear(),", ").concat(c.getHours(),":00"),a=Math.round(e.main.temp),i=e.weather[0].icon,o=e.weather[0].main;return Object(A.jsxs)("div",{className:"card",children:[Object(A.jsx)("img",{src:"http://openweathermap.org/img/wn/".concat(i,"@2x.png"),alt:""}),Object(A.jsx)("h4",{className:"card-city",children:n}),Object(A.jsxs)("p",{className:"card-degree",children:[a,"\xb0"]}),Object(A.jsx)("p",{className:"card-weather",children:o})]},t)})),a=function(){e(F(!1))};return document.body.style.overflow=c?"hidden":"auto",Object(A.jsx)("div",{className:c?"popup active":"popup",onClick:a,children:Object(A.jsxs)("div",{className:"popup-inner",onClick:function(e){return e.stopPropagation()},children:[Object(A.jsx)("span",{className:"popup-close",onClick:a,children:"x"}),Object(A.jsxs)("div",{className:"detail-header",children:[Object(A.jsxs)("h2",{className:"popup-title",children:[t.city," Forecast"]}),Object(A.jsx)("button",{className:"btn",onClick:function(){e(y(t.city))},children:"Delete"})]}),Object(A.jsx)("div",{className:"detail-list",children:n})]})})}),B=(c(63),function(){return Object(A.jsx)("div",{className:"loader",children:Object(A.jsxs)("div",{className:"lds-facebook",children:[Object(A.jsx)("div",{}),Object(A.jsx)("div",{}),Object(A.jsx)("div",{})]})})}),H=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.cities.locations})),c=Object(o.c)((function(e){return e.cities.localLocation})),a=Object(o.c)((function(e){return e.main.isFetching}));Object(n.useEffect)((function(){e(N(!0)),navigator.geolocation.getCurrentPosition((function(t){j(t.coords.latitude,t.coords.longitude).then((function(t){e(x(t.data)),e(N(!1))}))}))}),[]),Object(n.useEffect)((function(){(JSON.parse(localStorage.getItem("locations"))||[]).forEach((function(t){return e(g(t))}))}),[]);var i=c.map((function(e,t){return Object(A.jsx)(E,{icon:"http://openweathermap.org/img/wn/".concat(e.weather[0].icon,"@2x.png"),degrees:Math.round(e.main.temp),weather:e.weather[0].main,city:e.name},t)})),r=t.map((function(e,t){var c=Math.round(e.main.temp);return Object(A.jsx)(E,{icon:"http://openweathermap.org/img/wn/".concat(e.weather[0].icon,"@2x.png"),degrees:"".concat(c,"\xb0"),weather:e.weather[0].main,city:e.name},t)}));return Object(A.jsxs)("div",{className:"App",children:[Object(A.jsx)("h1",{children:"Weather Cloud"}),a?Object(A.jsx)(B,{}):Object(A.jsxs)("div",{className:"cards",children:[i,r,Object(A.jsx)(J,{}),Object(A.jsx)(q,{}),Object(A.jsx)(R,{})]})]})},U=Object(d.a)({reducer:{cities:v,modals:L,main:C}});i.a.render(Object(A.jsx)(o.a,{store:U,children:Object(A.jsx)(H,{})}),document.getElementById("root"))}},[[64,1,2]]]);
//# sourceMappingURL=main.c4e33250.chunk.js.map